(function(t){class e{constructor(e,i,s){let h=()=>{};Object.defineProperties(this,{parent:{value:e},input:{value:i},index:{value:0,writable:!0},list:{value:s},sublist:{value:[],writable:!0},noResult:{value:t.document.createElement("li")},onSearch:{get:()=>h,set:t=>{"function"==typeof t&&(h=t)}}}),this.noResult.appendChild(t.document.createTextNode("no result")),t.addEventListener("click",this.clear.bind(this)),this.input.addEventListener("keydown",this.search.bind(this)),this.input.addEventListener("keypress",this.search.bind(this)),this.input.addEventListener("keyup",this.search.bind(this)),this.input.addEventListener("paste",this.search.bind(this)),this.input.addEventListener("change",this.search.bind(this));const n=document.getElementsByTagName("a");for(let t of n)t.addEventListener("click",this._innerLink.bind(this))}show(){return this.parent.classList.add("show"),this}hide(){return this.parent.classList.remove("show"),this}reset(){for(this.parent.classList.remove("show");this.parent.firstChild;)this.parent.removeChild(this.parent.firstChild);return this}clearSublist(){return this.index=0,this.sublist=[],this}clear(){return this.input.value="",this.reset().clearSublist()}highlightSearch(t=!1){return this.sublist.forEach((e,i)=>{i!==this.index||t?e.classList.remove("highlight"):(e.classList.add("highlight"),e.scrollIntoView())}),this}highlighElement(e,i="add"){const s=t.document.getElementById(e);return s&&("function"==typeof s.classList[i]&&s.classList[i]("highlight"),s.scrollIntoView()),this}highlighPage(e="add"){return this.highlighElement(t.location.hash.replace("#",""),e)}_innerLink(e){const i=t.location.href.replace(t.location.hash,""),s=e.target.href.replace(e.target.hash,"");i===s&&(this.highlighPage(!0),this.highlighElement(e.target.hash.replace("#",""),"add"))}createListElement(e){const i=t.document.createElement("li"),s=`${e.name.substring(0,e.start)}<strong>${e.name.substring(e.start,e.end)}</strong>${e.name.substring(e.end)}`;return i.innerHTML=`<span class="search-name"><a href="${e.href}">${s}</a></span><span class="search-group ${e.type}">${e.group}</span>`,i.onclick=(i=>{this.highlighPage("remove"),t.location.href=e.href,this.highlighPage()}),i}createList(e){this.reset().clearSublist().show();const i=t.document.createElement("ul");return i.onmouseenter=(()=>{this.highlightSearch(!0),this.input.blur(),this.input.focus()}),i.onmouseleave=(()=>{this.highlightSearch()}),e.length>0?e.forEach((t,e)=>{this.sublist.push(this.createListElement(t,e)),i.appendChild(this.sublist[this.sublist.length-1])}):i.appendChild(this.noResult),this.highlightSearch(),i}search(t){if(38===t.keyCode||38===t.which||"ArrowUp"===t.code||"ArrowUp"===t.key)return"keydown"===t.type&&this.sublist.length>0&&(this.index-=1,this.index=this.index<0?this.sublist.length-1:this.index%this.sublist.length,this.highlightSearch()),this;if(40===t.keyCode||40===t.which||"ArrowDown"===t.code||"ArrowDown"===t.key)return"keydown"===t.type&&this.sublist.length>0&&(this.index=(this.index+1)%this.sublist.length,this.highlightSearch()),this;if(13===t.charCode||13===t.keyCode||13===t.which||"Enter"===t.code||"Enter"===t.key)return"keydown"===t.type&&this.sublist.length>0&&this.sublist[this.index].click(),this;const e=this.input.value.trim().toLowerCase();if(""===e)return this.clear();const i=[];return this.list.forEach(t=>{const s=t.name.toLowerCase();if(s.includes(e)){const h=s.indexOf(e);t.start=h,t.end=h+e.length,i.push(t)}}),this.parent.appendChild(this.createList(i)),this.onSearch(i),this}}t.SearchList=e})(window);